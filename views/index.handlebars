


<main>
  <div class="container">
    <div class="row">
      <div class="col-sm">
        
        <h2>Ready to devour!</h2>

        {{#each burger}}
          {{#unless this.devoured}}

          <p>{{this.id}}. {{this.burger_name}}
           <form action="/burgers/"{{this.id}} method="put">
          <input type="hidden" class="burger_id" type="text" value={{this.id}}>
           <button type="submit" class="btn btn-primary btn-sm" id="devoured">Devour it!</button>
          </form> 
          </p>

          {{/unless}}
        {{/each}}
      </div>

      <div class="col-sm">
          <h2>Add A Burger</h2>
          
          <form action="/burgers" method="POST">
        <input type="text" id="name"  name="burger_name" placeholder="Delicious Burgers here">
        <button type="submit" class="btn btn-primary btn-sm">Add The Burger</button><br><br>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSM-64Fwomj0zm8HSiUZwDRBlUEfA8Nehw6AcK0fVQ9wCQoQhH4ig" width="200px" height="200px">
        </form>  
        
    <br>
    <br>
    <div class="col-sm">
        <h2>Already Eaten:</h2>
        {{#each burger}}
            {{#if this.devoured}}
            <div class='burgerEaten'>
              <div>
              <p>{{this.id}}. {{this.burger_name}}</p>
              </div>
            </div>
            {{/if}}
        {{/each}}
    </div>
</main>

<script>
  $(function() {
    $("#devoured").on("click", function(event) {
      var id = $(this).data("id");
      var toDevour = $(this).data("devoured");
      var wasDevoured = {
        devoured: true
      };
      $.ajax("burgers" + id, {
        type: "PUT",
        data: wasDevoured
      }).then(function() {
        console.log("changed devour to", toDevour);
        location.reload();
      });
    });
});

</script>